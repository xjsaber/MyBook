# 深入理解Java虚拟机：JVM高级特性与最佳实践（第3版） #

## 前言

### 如何阅读这本书

本书一共分为五个部分：走近Java、自动内存管理、虚拟机执行子系统、程序编译与代码优化、高效并发

**第一部分 走近Java**

了解Java技术的来龙去脉，以及编译自己的OpenJDK

**第二部分 自动内存管理**

介绍了虚拟机中内粗你是如何划分的，哪部分区域、什么样的代码和操作可能导致内存溢出异常，并蒋介了各个区域出现内存溢出异常的常见原因。

Java运行期数据区域是虚拟机的基础结构，主要的变化是JDK 8示器的永久代的螺母和元空间的登场

第3



## 第一部分 走近Java ##

### 第1章 走近Java ###

#### 1.1 概述 ####

#### 1.2 Java技术体系 ####

* Java程序设计语言
* 各种硬件平台上的Java虚拟机实现
* Class文件格式
* Java类库API
* 来自商业机构和开源社区的第三方Java类库

#### 1.3 Java发展史 ####



#### 1.4 Java虚拟机家族 ####

##### 1.4.1 虚拟机始祖：Sun Classic/Exact VM #####



##### 1.4.2 武林盟主：HotSpot VM #####

#### 1.5 展望Java技术的未来

#### 1.6 实战：自己编译JDK

1. 编译一套自己的JDK
2. 阅读和跟踪调试JDK源码来了解Java
3. Java类库里的很多底层方法都是Native

#### 1.7 本章小结

* OpenJDK12

* Java的“自动内存管理” “Class文件结构与执行引擎” “编译器优化”及“多线程并发”方法的实现原理

## 第二部分 自动内存管理 ##

### 第2章 Java内存区域与内存溢出异常 ###

#### 2.1 概述

介绍Java虚拟机内存的各个区域，讲解这些区域的作用、服务对象及其中可能产生的问题

#### 2.2 运行时数据区域

Java虚拟机在执行Java程序的过程中会把它所管理的内存划分为若干个不同的数据区域。这些区域有各自的用途，以及创建和销毁的时间，有的区域随着虚拟机进程的启动而一直存在，有些区域则是依赖用户线程的启动和结束而建立和销毁。



##### 2.2.1 程序计数器

程序计数器（Program Counter Register）是一个较小的内存空间，它可以看作是当前线程所执行的字节码的行号指示器。在Java虚拟机的概念模型里，字节码解释器工作时就是通过改变这个计数器的值来选取下一条需要执行的字节码指令，它是程序控制流的指示器，分支、循环、跳转、异常处理、线程恢复等基础功能都需要依赖这个计数器来完成。由于Java虚拟机的多线程是通过线程轮流切换、分配处理器执行时间的方式来实现的、在任何一个确定的时刻，一个处理器（对于多核处理器来说是一个内核）都只会执行一条线程中的指令。

##### 2.2.2 Java虚拟机栈

与程序计数器一样，Java虚拟机栈（Java Virtual Machine Stack）也是线程私有的，它的生命周期与线程相同。虚拟机栈描述的是Java方法执行的线程内存模型：每个方法被执行的时候，Java虚拟机都会同步创建一个栈帧用于存储局部变量表、操作数栈、动态连接、方法出口等信息。



域是“堆”和“栈”两块。

HotSpot虚拟机

##### 2.2.3 本地方法栈

本地工作栈（Native Method Stacks）与虚拟机栈所发挥的作用是非常相似的，其区别只是虚拟机栈为虚拟机执行Java方法（也就是字节码）服务，而本地方法栈则是虚拟机使用到的

HotSpot虚拟机的栈容量是不可以动态扩展的，以前的Classic虚拟机倒是可以。所以在HotSpot虚拟机上是不会由于虚拟机栈无法扩展而导致OutOfMemoryError异常——只要线程申请栈空间成功就不会有OOM，但是如果申请时就失败，仍然是会出现OOM异常的。

##### 2.2.4 Java堆

对于Java应用程序来说，Java堆（Java Heap）是虚拟机锁管理的内存中最大的一块。Java堆是被所有线程共享的一块内存区域，在虚拟机启动时创建。此内存区域的唯一目的就是存放对象实例，Java世界里“几乎”所有对象实例都在这里分配内存。

#### 2.5 本章小结

虚拟机里面内存的划分

第3章 垃圾收集器与内存分配策略

第4章 虚拟机性能监控、故障处理工具

第5章 调优案例分析与实战